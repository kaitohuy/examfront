/* --- CSS GRID LAYOUT --- */

/* 1. Grid cho phần thông tin chung (Meta fields) */
.meta-grid {
  display: grid;
  /* Tự động chia cột: mỗi cột tối thiểu 140px, còn lại chia đều (1fr) */
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: 12px;
  width: 100%;
}

/* 2. Grid cho phần đáp án (A/C bên trái, B/D bên phải) */
.ans-grid {
  display: grid;
  grid-template-columns: 1fr 1fr; /* 2 cột đều nhau */
  gap: 16px;
}

/* Cột chứa Input + Preview */
.ans-col {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* Ô preview công thức toán */
.preview {
  border: 1px solid rgba(0,0,0,.12);
  border-radius: 4px;
  padding: 12px;
  min-height: 56px;
  background: #f8f9fa;
  white-space: pre-wrap; /* Giữ xuống dòng */
  
  /* --- SỬA ĐỔI TẠI ĐÂY --- */
  /* Xóa hoặc comment dòng display: flex và align-items: center */
  /* display: flex; */
  /* align-items: center; */
  
  display: block; /* Dùng block để text chạy từ trên xuống dưới tự nhiên */
  overflow-x: auto; /* Thêm cái này để nếu công thức toán quá dài thì hiện thanh cuộn ngang, không vỡ layout */
}

/* Thu gọn padding của mat-form-field để tiết kiệm diện tích */
.mf-compact .mat-mdc-text-field-wrapper {
  padding-bottom: 0;
}
::ng-deep .mf-compact .mat-mdc-form-field-subscript-wrapper {
  display: none; /* Ẩn khoảng trống báo lỗi nếu không cần thiết để form gọn hơn */
}

/* --- RESPONSIVE --- */

/* Tablet & Mobile: Meta grid chuyển về 2 cột hoặc 1 cột */
@media (max-width: 992px) {
  .meta-grid {
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  }
}

/* Mobile: Chuyển hết về 1 cột */
@media (max-width: 768px) {
  .ans-grid {
    grid-template-columns: 1fr;
  }
  .meta-grid {
    grid-template-columns: 1fr 1fr; /* Vẫn giữ 2 cột trên mobile cho các field nhỏ */
  }
}

@media (max-width: 480px) {
  .meta-grid {
    grid-template-columns: 1fr; /* Màn hình quá nhỏ thì 1 cột */
  }
}